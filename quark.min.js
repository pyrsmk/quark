!function(e,n){"function"==typeof define&&define.amd?define([],function(){return e.quark=n()}):"object"==typeof exports?module.exports=n():e.quark=n()}(this,function(){var e=function(n){var o;return"function"==typeof n?e._whenReady(n):o=t("string"==typeof n?/</.test(n)?e._createNode(n):e._selectNode(n):"object"==typeof n&&null!==n&&n!==window&&"length"in n?n[0]:n)},n=function(o,r){var u,i,d=[];r="undefined"==typeof r?!1:!!r,d.quarked=!0,"string"==typeof o&&(o=/</.test(o)?e._createNodes(o):e._selectNodes(o)),"object"==typeof o&&null!==o&&o!==window&&"length"in o||(o=[o]);for(u=0,i=o.length;i>u;++u)r||"object"==typeof o&&"quarked"in o?d.push(o[u]):d.push(t(o[u]));for(u in e._nodeMethods)d[u]=function(e,t){return function(){var r,u,i,d,f,c=[];for(u=0,i=e.length;i>u;++u)c.push(t.apply(e[u],arguments));if(c.length){if("object"==typeof c[0]&&null!==o&&"length"in c[0]&&c[0].length){if("quarked"in c[0][0]){for(r=[],u=0,i=c.length;i>u;++u)for(d=0,f=c[u].length;f>d;++d)r.push(c[u][d]);return n(r)}}else if("object"==typeof c[0]&&"quarked"in c[0]){for(r=[],u=0,i=c.length;i>u;++u)r.push(c[u]);return n(r)}return c[0]}return e}}(d,e._nodeMethods[u]);return d.forEach=function(e){return function(n){for(var t=-1;e[++t];)n.apply(e[t],[t]);return e}}(d),d},t=function(n){var t,o={node:null,quarked:!0};if("object"!=typeof n||null===n){var r=function(){};for(t in e._nodeMethods)o[t]=r}else if("quarked"in n)o=n;else{o.node=n;for(t in e._nodeMethods)o[t]=function(e,n){return function(){return n.apply(e,arguments)}}(o,e._nodeMethods[t])}return o};return e._whenReady=function(e){"complete"==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},e._selectNode=function(e){return document.querySelector(e)},e._selectNodes=function(e){return document.querySelectorAll(e)},e._createNode=function(e){var n=document.createElement("div");return n.innerHTML=e,n.firstChild},e._createNodes=function(e){var n=document.createElement("div"),t=[];for(n.innerHTML=e,n=n.firstChild,t.push(n);n=n.nextSibling;)t.push(n);return t},e._nodeMethods={findOne:function(n){return"querySelector"in this.node?e(this.node.querySelector(n)):e()},findAll:function(e){return n("querySelectorAll"in this.node?this.node.querySelectorAll(e):[])}},{$:e,$$:n}});