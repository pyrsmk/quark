!function(e,n,t){"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(t):e[n]=t}(this,"quark",function(e){var n=function(e){var t;return"function"==typeof e?n._whenReady(e):t=o("string"==typeof e?/</.test(e)?n._createNodes(e)[0]:n._selectNode(e):e)},t=function(e){var r,u,i=[];if(i.quarked=!0,"string"==typeof e&&(e=/</.test(e)?n._createNodes(e):n._selectNodes(e)),"object"==typeof e&&"length"in e)for(r=0,u=e.length;u>r;++r)i.push(o(e[r]));for(r in n._nodeMethods)i[r]=function(e,n){return function(){var o,r,u,i,f,d=[];for(r=0,u=e.length;u>r;++r)d.push(n.apply(e[r],arguments));if(d.length){if("object"==typeof d[0]&&"length"in d[0]){if("quarked"in d[0][0]){for(o=[],r=0,u=d.length;u>r;++r)for(i=0,f=d[r].length;f>i;++i)o.push(d[r][i]);return t(o)}}else if("object"==typeof d[0]&&"quarked"in d[0]){for(o=[],r=0,u=d.length;u>r;++r)o.push(d[r]);return t(o)}return d[0]}return e}}(i,n._nodeMethods[r]);return i.forEach=function(e){return function(n){for(var t=-1;e[++t];)n.apply(e[t],[t]);return e}}(i),i},o=function(e){var t,o={node:null,quarked:!0};if("object"!=typeof e||null===e){var r=function(){};for(t in n._nodeMethods)o[t]=r}else if("quarked"in e)o=e;else{o.node=e;for(t in n._nodeMethods)o[t]=function(e,n){return function(){return n.apply(e,arguments)}}(o,n._nodeMethods[t])}return o};return n._whenReady=function(e){document.addEventListener("DOMContentLoaded",e)},n._selectNode=function(e){return document.querySelector(e)},n._selectNodes=function(e){return document.querySelectorAll(e)},n._createNodes=function(e){var n=document.createElement("div"),t=[];for(n.innerHTML=e,n=n.firstChild,t.push(n);n=n.nextSibling;)t.push(n);return t},n._nodeMethods={findOne:function(e){return"querySelector"in this.node?n(this.node.querySelector(e)):n()},findAll:function(e){return t("querySelectorAll"in this.node?this.node.querySelectorAll(e):[])}},{$:n,$$:t}}());
